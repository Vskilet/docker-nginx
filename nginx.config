# Nextcloud - cloud.sene.ovh
server {
    listen 80;
    listen [::]:80;
    
    client_max_body_size 10G;
    server_name cloud.sene.ovh www.cloud.sene.ovh;
    return 301 https://cloud.sene.ovh/;
}
server{
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    
    server_name  cloud.sene.ovh;
    
    client_max_body_size 10G;
    
    ssl_certificate /etc/nginx/ssl/live/cloud.sene.ovh/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/live/cloud.sene.ovh/privkey.pem;
    ssl_trusted_certificate /etc/nginx/ssl/live/cloud.sene.ovh/fullchain.pem;
  
    location / {
        proxy_pass http://nextcloud:8888/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    include tls.conf;
}
# Nextcloud Collaborative Tools - office.sene.ovh
server {
    listen 80;
    listen [::]:80;
    
    server_name office.sene.ovh www.office.sene.ovh;
    return 301 https://office.sene.ovh/;
}
server{
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    
    server_name  office.sene.ovh;
    
    ssl_certificate /etc/nginx/ssl/live/office.sene.ovh/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/live/office.sene.ovh/privkey.pem;
    ssl_trusted_certificate /etc/nginx/ssl/live/office.sene.ovh/fullchain.pem;
  
    # static files
    location ^~ /loleaflet {
        proxy_pass https://nextcloud-collaborative:9980;
        proxy_set_header Host $http_host;
    }

    # WOPI discovery URL
    location ^~ /hosting/discovery {
        proxy_pass https://nextcloud-collaborative:9980;
        proxy_set_header Host $http_host;
    }

    # websockets, download, presentation and image upload
    location ^~ /lool {
        proxy_pass https://nextcloud-collaborative:9980;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $http_host;
    }
    include tls.conf;
}

# Emby - stream.sene.ovh
server {
    listen 80;
    listen [::]:80;
    
    server_name stream.sene.ovh www.stream.sene.ovh;
    return 301 https://stream.sene.ovh/;
}
server{
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    
    server_name  stream.sene.ovh;

    ssl_certificate /etc/nginx/ssl/live/stream.sene.ovh/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/live/stream.sene.ovh/privkey.pem;
    ssl_trusted_certificate /etc/nginx/ssl/live/stream.sene.ovh/fullchain.pem;
  
    location / {
        proxy_pass http://151.80.40.172:8096/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    include tls.conf;
    
}

# musique-meyenheim.fr - Paul
server {
    listen 80;
    listen [::]:80;
    
    server_name musique-meyenheim.fr www.musique-meyenheim.fr;
    return 301 https://musique-meyenheim.fr/;
}
server{
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    
    server_name  musique-meyenheim.fr;

    ssl_certificate /etc/nginx/ssl/live/musique-meyenheim.fr/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/live/musique-meyenheim.fr/privkey.pem;
    ssl_trusted_certificate /etc/nginx/ssl/live/musique-meyenheim.fr/fullchain.pem;
  
    location / {
        proxy_pass http://musique/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    include tls.conf;
 
}

# Seedbox - seed.sene.ovh
server {
    listen 80;
    listen [::]:80;
    
    server_name seed.sene.ovh www.seed.sene.ovh;
    return 301 https://seed.sene.ovh/;
}
server{
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    
    server_name  seed.sene.ovh;

    ssl_certificate /etc/nginx/ssl/live/seed.sene.ovh/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/live/seed.sene.ovh/privkey.pem;
    ssl_trusted_certificate /etc/nginx/ssl/live/seed.sene.ovh/fullchain.pem;
  
    location / {
        proxy_pass http://seed/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        auth_basic "Lorsqu'un pancake tombe dans la neige avant le 31 d√©cembre, on dit que :";
        auth_basic_user_file .htpasswd;
    }

    include tls.conf;
 
}

# Seedbox - seed.nyanlout.re
server {
    listen 80;
    listen [::]:80;
    
    server_name seed.nyanlout.re www.seed.nyanlout.re;
    return 301 https://seed.nyanlout.re/;
}
server{
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    
    server_name  seed.nyanlout.re;

    ssl_certificate /etc/nginx/ssl/live/seed.nyanlout.re/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/live/seed.nyanlout.re/privkey.pem;
    ssl_trusted_certificate /etc/nginx/ssl/live/seed.nyanlout.re/fullchain.pem;
  
    location / {
        proxy_pass http://seed/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        auth_basic "Bruh";
        auth_basic_user_file .htpasswd;
    }

    include tls.conf;
 
}

# Gitlab - gitlab.nyanlout.re
server {
    listen 80;
    listen [::]:80;
    
    server_name gitlab.nyanlout.re www.gitlab.nyanlout.re;
    return 301 https://gitlab.nyanlout.re/;
}
server{
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    
    server_name  gitlab.nyanlout.re;

    ssl_certificate /etc/nginx/ssl/live/gitlab.nyanlout.re/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/live/gitlab.nyanlout.re/privkey.pem;
    ssl_trusted_certificate /etc/nginx/ssl/live/gitlab.nyanlout.re/fullchain.pem;
  
    location / {
        proxy_pass http://gitlab/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    include tls.conf;
 
}

# Gitlab - git.sene.ovh
server {
    listen 80;
    listen [::]:80;
    
    server_name git.sene.ovh www.git.sene.ovh;
    return 301 https://git.sene.ovh/;
}
server{
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    
    server_name  git.sene.ovh;

    ssl_certificate /etc/nginx/ssl/live/git.sene.ovh/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/live/git.sene.ovh/privkey.pem;
    ssl_trusted_certificate /etc/nginx/ssl/live/git.sene.ovh/fullchain.pem;
  
    location / {
        proxy_pass http://gitlab/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    include tls.conf;
 
}

# Muximux - nyanlout.re
server {
    listen 80;
    listen [::]:80;
    
    server_name nyanlout.re www.nyanlout.re;
    return 301 https://nyanlout.re/;
}
server{
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    
    server_name  nyanlout.re;

    ssl_certificate /etc/nginx/ssl/live/nyanlout.re/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/live/nyanlout.re/privkey.pem;
    ssl_trusted_certificate /etc/nginx/ssl/live/nyanlout.re/fullchain.pem;
  
    location / {
        proxy_pass http://muximux/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        auth_basic "Bruh";
        auth_basic_user_file .htpasswd;
    }

    include tls.conf;
 
}
